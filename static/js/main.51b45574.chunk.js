(this["webpackJsonpavito-test"]=this["webpackJsonpavito-test"]||[]).push([[0],{122:function(t,e){},140:function(t,e,n){},141:function(t,e,n){"use strict";n.r(e);var r,c,a,i,s,o,u,d=n(0),j=n.n(d),l=n(56),b=n(3),p=n(12),m=n(10),f=n(57),x=(Object(f.a)(),n(9)),g=n.n(x),O=n(16),h=n(17),w=n.n(h),v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.by,r=t.time,c=t.title,a=t.score,i=t.url;return{id:e,by:n,time:r,title:c,score:a,url:i}},y="https://hacker-news.firebaseio.com/v0/",k="".concat(y,'newstories.json?orderBy="$key"&limitToFirst=100'),S=("".concat(y,"item/"),"".concat(y,"item/")),N=function(){var t=Object(O.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("".concat(S+e,".json")).then((function(t){var e=t.data;return e&&v(e)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(O.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("".concat(S+e,".json")).then((function(t){return t.data}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(O.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get(k).then((function(t){return t.data}));case 2:return e=t.sent,localStorage.setItem("StoryIds",JSON.stringify(e)),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(O.a)(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("".concat(S+e,".json")).then((function(t){return t.data}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=n(6),J=n(7),A=J.a.section(r||(r=Object(M.a)(["\npadding: 20px;\nbackground: #fff;\nborder-radius: 8px;\npointer-events:none;\nheight: calc(100% - 40px);\ncolor:#000;\nmax-width:1560px;\nmargin: 0 auto;\n\n.story-title{\n    font-weight:700;\n    color: rgb(255, 102, 0);\n}\n.story-title-item{\n    font-weight:700;\n    color: rgb(255, 102, 0);\n    font-size:32px;\n    margin-top: 0;\n}\n.story-row{\n    margin: 0 0 20px 0;\n    align-items: center;\n    display: flex;\n    font-size:24px\n}\n.story-row>img{\n    max-width:32px;\n    margin-right:10px;\n}\n.story-row:last-child{\n    margin:0;\n}\n"]))),D=n.p+"static/media/star.2ee569fb.svg",E=n.p+"static/media/man.9a2295f8.svg",L=n.p+"static/media/time.c1581ebe.svg",P=n(61),z=n.n(P),B=n(1),H=function(t){var e=t.newId,n=Object(d.useState)({}),r=Object(b.a)(n,2),c=r[0],a=r[1];return Object(d.useEffect)((function(){N(e).then((function(t){return t&&t.id&&a(t)}))}),[]),c&&c.id?Object(B.jsx)(z.a,{animateIn:"fadeIn",animateOnce:!0,children:Object(B.jsxs)(A,{children:[Object(B.jsx)("p",{className:"story-row story-title",children:c.title}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:E})," ",c.by]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:D})," ",c.score]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:L})," ",function(t){var e=new Date(1e3*t),n=e.getFullYear(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return e.getDate()+" "+r+" "+n+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}(c.time)]})]})}):""},T=J.a.h1(c||(c=Object(M.a)(["\nfont-size: 64px;\ntext-align: center;\nmargin: 40px 0;\n"]))),Y=J.a.div(a||(a=Object(M.a)(["\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\nmax-width: 1600px;\nmargin: 40px auto;\nheight: 78px;\n\nbutton{\n    margin-left: 0 !important;\n}\n"]))),$=J.a.div(i||(i=Object(M.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nmax-width: 1600px;\nmargin: 0 auto;\n"]))),_=J.a.div(s||(s=Object(M.a)(["\ndisplay: grid;\ngrid-template-columns: 1fr 1fr;\ngrid-column-gap: 40px;\ngrid-row-gap: 40px;\nmax-width: 1600px;\nmargin: 0 auto;\n"]))),q=J.a.button(o||(o=Object(M.a)(["\n    background: #fff;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width:64px;\n    height:64px;\n    margin-left: auto;\n    transition: 0.5s;\n\n    img{\n        max-width:32px;\n    }\n"]))),G=n.p+"static/media/reload.eb18d95f.svg",K=function(t){var e=t.appCallback,n=Object(d.useState)([]),r=Object(b.a)(n,2),c=r[0],a=r[1],i=Object(d.useState)(!1),s=Object(b.a)(i,2),o=s[0],u=s[1];Object(d.useEffect)((function(){F().then((function(t){return t&&a(t)}))}),[]);var j=function(t){t.target.classList.contains("story-wrapper")&&(localStorage.setItem("newId",t.target.getAttribute("data-testid")),e(t.target.getAttribute("data-testid")))};return c?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)($,{children:[Object(B.jsx)(T,{children:"Hacker News"}),Object(B.jsx)(q,{className:"btn",onClick:function(){o||(u(!0),F().then((function(t){return t&&a(t)&&u(!1)})),window.location.reload())},children:Object(B.jsx)("img",{src:G,alt:G})})]}),Object(B.jsx)(_,{children:c.sort((function(t,e){return t.time>e.time?-1:t.time<e.time?1:0})).map((function(t){return Object(B.jsx)(p.b,{to:"/avito-test/new-item",children:Object(B.jsx)("div",{className:"story-wrapper","data-testid":t,onClick:j,children:Object(B.jsx)(H,{newId:t},t)},t)},t)}))})]}):""},Q=n(24),R=function(t){var e=t.childId,n=Object(d.useState)({}),r=Object(b.a)(n,2),c=r[0],a=r[1];return Object(d.useEffect)((function(){C(e).then((function(t){return t&&t.id&&a(t)}))}),[]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("p",{children:[Object(B.jsx)("img",{src:E,alt:E})," ",c.by]}),Object(B.jsx)("p",{children:c.text})]})},U=J.a.div(u||(u=Object(M.a)(["\npadding: 20px;\nbackground: #fff;\nborder-radius: 8px;\ncolor: #000;\ncursor:pointer;\nmax-width:1560px;\nmargin:0 auto;\nmargin-top: 20px;\n\n.comment-wrapper-child{\n    padding-left: 2.5%;\n}\n\nimg{\n    max-width:32px;\n    margin-right:10px;\n}\n\np{\n    display:flex;\n    align-items:center;\n}\n"]))),V=n(63),W=n.n(V),X=function(t){var e=t.commentId,n=Object(d.useState)({}),r=Object(b.a)(n,2),c=r[0],a=r[1],i=Object(Q.useStateIfMounted)([]),s=Object(b.a)(i,2),o=s[0],u=s[1];Object(d.useEffect)((function(){C(e).then((function(t){t&&t.id&&a(t)}))}),[]);return c&&c.id?Object(B.jsxs)(U,{className:"comment-wrapper",onClick:function(t){if(t.target.classList.contains("comment-wrapper")){var e=t.target.getAttribute("data-id");C(e).then((function(t){t.hasOwnProperty("kids")&&u(t.kids)}))}},"data-id":e,children:[Object(B.jsxs)("p",{children:[Object(B.jsx)("img",{src:E,alt:E})," ",c.by]}),Object(B.jsxs)("div",{children:[" ",W()(c.text)," "]}),0!=o?o.map((function(t){return Object(B.jsx)("div",{className:"comment-wrapper-child",children:Object(B.jsx)(R,{childId:t},t)})})):""]}):""},Z=n.p+"static/media/back.88938ea5.svg",tt=n.p+"static/media/link.baaa8043.svg",et=n.p+"static/media/comment.dd7f7e90.svg",nt=function(t){t.newCurrentId;var e=Object(Q.useStateIfMounted)(!1),n=Object(b.a)(e,2),r=(n[0],n[1]),c=Object(d.useState)({}),a=Object(b.a)(c,2),i=a[0],s=a[1],o=Object(d.useState)([]),u=Object(b.a)(o,2),j=u[0],l=u[1],m=Object(d.useState)(!1),f=Object(b.a)(m,2),x=f[0],g=f[1];Object(d.useEffect)((function(){I(localStorage.getItem("newId")).then((function(t){t&&t.id&&s(t),r(!0),t.hasOwnProperty("kids")&&t&&t.id&&l(t.kids)}))}),[]);return i&&i.id?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(Y,{children:[Object(B.jsx)(q,{className:"btn",onClick:function(){x||(g(!0),I().then((function(t){return t&&l(t.kids)&&g(!1)})),window.location.reload())},children:Object(B.jsx)("img",{src:G,alt:G})}),Object(B.jsx)(p.b,{to:"/avito-test/news",children:Object(B.jsx)(q,{className:"btn",children:Object(B.jsx)("img",{src:Z,alt:Z})})})]}),Object(B.jsxs)(A,{"data-testid":i.id,className:"story-click",children:[Object(B.jsx)("h2",{className:"story-title-item",children:i.title}),Object(B.jsxs)("a",{href:i.url,target:"_blank",className:"story-row",children:[Object(B.jsx)("img",{src:tt}),Object(B.jsx)("span",{children:i.url})]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:L})," ",function(t){var e=new Date(1e3*t),n=e.getFullYear(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return e.getDate()+" "+r+" "+n+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}(i.time)]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:E})," ",i.by]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:D})," ",i.score]}),Object(B.jsxs)("p",{className:"story-row",children:[Object(B.jsx)("img",{src:et})," ",i.descendants]})]}),j.map((function(t){return Object(B.jsx)(X,{commentId:t},t)}))]}):""},rt=(n(140),function(){var t=Object(d.useState)(0),e=Object(b.a)(t,2),n=e[0],r=e[1];return Object(B.jsx)(p.a,{children:Object(B.jsxs)(m.c,{children:[Object(B.jsx)(m.a,{path:"/avito-test/news",children:Object(B.jsx)(K,{appCallback:function(t){r(t)}})}),Object(B.jsx)(m.a,{path:"/avito-test/new-item",children:Object(B.jsx)(nt,{newCurrentId:n})})]})})}),ct=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};Object(l.render)(Object(B.jsx)(j.a.StrictMode,{children:Object(B.jsx)(rt,{})}),document.getElementById("root")),ct()}},[[141,1,2]]]);
//# sourceMappingURL=main.51b45574.chunk.js.map